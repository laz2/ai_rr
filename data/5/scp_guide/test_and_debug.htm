<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<title>1</title>
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
.MsoChpDefault
	{font-size:10.0pt;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:2.0cm 42.5pt 2.0cm 3.0cm;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body bgcolor="#CCFFFF" lang=RU>

<div class=WordSection1>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:16.0pt'>Тестирование и отладка</span></b></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt'>При возникновении ошибки в </span><span lang=EN-US
style='font-size:14.0pt'>m</span><span style='font-size:14.0pt'>4</span><span
lang=EN-US style='font-size:14.0pt'>scp</span><span style='font-size:14.0pt'>-файле,
место локализации которой непонятно, полезно сгенерировать scs-файл для </span><span
lang=EN-US style='font-size:14.0pt'>m</span><span style='font-size:14.0pt'>4</span><span
lang=EN-US style='font-size:14.0pt'>scp</span><span style='font-size:14.0pt'>-файла.
Это можно сделать следующей командой:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><i><span
lang=EN-US style='font-size:14.0pt'>m4scp2scs “fs_repo_src\test.m4scp” &gt;
out.scs</span></i></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
lang=EN-US style='font-size:14.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt'>В scs-файле видны ошибки преобразования и ошибки
пользователя, которые становятся намного очевиднее после конвертирования. Если
ошибку не удаётся локализовать из scs-файла, так как сбой происходит на этапе
формирования репозитория и scs-файл ещё не сформирован:</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
-18.0pt'><span style='font-size:14.0pt'>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt'>производить последовательный
запуск проверяемой программы, при этом комментировать сначала первые полфайла,
затем вторые, замечать ту половину, в которой возникает ошибка и далее дробить
ошибочную половину по методу бинарного поиска до момента, когда точное место
ошибки будет известно;</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
-18.0pt'><span style='font-size:14.0pt'>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt'>так как отображается номер строки,
вызвавшей ошибку, то необходимо определить номер строки в проверяемом файле,
соответствующей строке в scs-файле, для этого в разные места проверяемого файла
(по методу бинарного поиска) вставляются пустые строки и отмечаются места, при
которых изменяется номер ошибочной строки.</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:14.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt'>Иногда бинарный поиск покажет на комментарий (то, что
он содержит ошибку) – это возможно. В этом случае следует переписать
комментарий с другими знаками препинания, а если внутри комментария есть
операторы например <i>return</i>, то следует их либо убрать, либо переписать в
верхнем регистре или использовать символ комментария m4 – «#».</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt'>Когда определяется ошибочный оператор по счёту (так
как в протоколе указывается порядковый номер оператора, после выполнения
которого произошла ошибка), то нельзя забывать, что <i>call</i></span><i><span
lang=EN-GB style='font-size:14.0pt'>R</span></i><i><span style='font-size:14.0pt'>eturn()</span></i><span
style='font-size:14.0pt'> соответствует двум операторам, следовательно это
нужно учитывать и корректировать счётчик.</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:14.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-size:14.0pt'>Приведём
несколько приёмов отладки и тестирования:</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
-18.0pt'><span style='font-size:14.0pt'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt'>Если используемый для проверки
отладочной информации<i> </i></span><i><span lang=EN-GB style='font-size:14.0pt'>p</span></i><i><span
style='font-size:14.0pt'>rintEl()</span></i><span style='font-size:14.0pt'>
ничего не выводит, то следует проверить существование проверяемого узла при
помощи </span><span lang=EN-US style='font-size:14.0pt'>scp</span><span
style='font-size:14.0pt'>-оператора <i>ifVarAssign()</i>.</span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-align:justify;text-indent:
-18.0pt'><span style='font-size:14.0pt'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt'>Если протокол работы программы
большой, а надо отследить все ошибки, то следует создать командный файл со
следующей командой:</span></p>

<p class=MsoNormal style='margin-left:53.4pt;text-align:justify;text-indent:
17.4pt'><span lang=EN-US style='font-size:14.0pt;font-family:"Courier New"'>start-pm
--run-program “/path/to/program” 1&gt;_Out_log 2&gt;_Error</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt'>В этом случае в файле <i>_Error</i> будут помещены все
выявленные сообщения об ошибках.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
lang=EN-US style='font-size:14.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:16.0pt'>Автоматическое тестирование</span></b></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt'>Программа </span><span lang=EN-US style='font-size:
14.0pt'>start</span><span style='font-size:14.0pt'>-</span><span lang=EN-US
style='font-size:14.0pt'>pm </span><span style='font-size:14.0pt'>позволяет
тестировать </span><span lang=EN-US style='font-size:14.0pt'>scp</span><span
style='font-size:14.0pt'>-программы в автоматическом режиме. Для этого
необходимо использовать аргумент --</span><span lang=EN-US style='font-size:
14.0pt'>run</span><span style='font-size:14.0pt'>-</span><span lang=EN-US
style='font-size:14.0pt'>testsuite</span><span style='font-size:14.0pt'>,
который позволяет запустить по порядку </span><span lang=EN-US
style='font-size:14.0pt'>scp</span><span style='font-size:14.0pt'>-программы,
идентификатор которых начинается со строки «</span><span lang=EN-US
style='font-size:14.0pt'>test</span><span style='font-size:14.0pt'>». Например,
можно запустить следующим образом</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
lang=EN-US style='font-size:14.0pt;font-family:"Courier New"'>start-pm --run-testsuite
“/lib/relational/test/sc_in_ord_at_1” 2&gt;_Error</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
lang=EN-US style='font-size:14.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt'>Если предположить, что </span><span style='font-size:
14.0pt;font-family:"Courier New"'>“/</span><span lang=EN-US style='font-size:
14.0pt;font-family:"Courier New"'>lib</span><span style='font-size:14.0pt;
font-family:"Courier New"'>/</span><span lang=EN-US style='font-size:14.0pt;
font-family:"Courier New"'>relational</span><span style='font-size:14.0pt;
font-family:"Courier New"'>/</span><span lang=EN-US style='font-size:14.0pt;
font-family:"Courier New"'>test</span><span style='font-size:14.0pt;font-family:
"Courier New"'>/</span><span lang=EN-US style='font-size:14.0pt;font-family:
"Courier New"'>sc</span><span style='font-size:14.0pt;font-family:"Courier New"'>_</span><span
lang=EN-US style='font-size:14.0pt;font-family:"Courier New"'>in</span><span
style='font-size:14.0pt;font-family:"Courier New"'>_</span><span lang=EN-US
style='font-size:14.0pt;font-family:"Courier New"'>ord</span><span
style='font-size:14.0pt;font-family:"Courier New"'>_</span><span lang=EN-US
style='font-size:14.0pt;font-family:"Courier New"'>at</span><span
style='font-size:14.0pt;font-family:"Courier New"'>_1” </span><span lang=EN-US
style='font-size:14.0pt'>URI </span><span style='font-size:14.0pt'>сегмента, то
будут запущены все программы, имя которых начинается с “</span><span
lang=EN-US style='font-size:14.0pt'>test</span><span style='font-size:14.0pt'>”.
Если будут переданы следующие аргументы:</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
lang=EN-US style='font-size:14.0pt;font-family:"Courier New"'>start-pm
--run-testsuite “/lib/relational/test” 2&gt;_Error</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
lang=EN-US style='font-size:14.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt'>то, просмотрены все подсегменты и поддиректории для </span><span
lang=EN-US style='font-size:14.0pt'>URI </span><span style='font-size:14.0pt;
font-family:"Courier New"'>“/</span><span lang=EN-US style='font-size:14.0pt;
font-family:"Courier New"'>lib</span><span style='font-size:14.0pt;font-family:
"Courier New"'>/</span><span lang=EN-US style='font-size:14.0pt;font-family:
"Courier New"'>relational</span><span style='font-size:14.0pt;font-family:"Courier New"'>/</span><span
lang=EN-US style='font-size:14.0pt;font-family:"Courier New"'>test</span><span
style='font-size:14.0pt;font-family:"Courier New"'>” </span><span
style='font-size:14.0pt'>и</span><span style='font-size:14.0pt;font-family:
"Courier New"'> </span><span style='font-size:14.0pt'>из них будут запущены все
программы, имя которых начинается с «</span><span lang=EN-US style='font-size:
14.0pt'>test</span><span style='font-size:14.0pt'>».</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt'>&nbsp;</span></p>

</div>

</body>

</html>
