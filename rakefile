
require 'rake/clean'

CLEAN.include 'auto'
CLEAN.include '_region_.*' 
CLEAN.include '*.aux'
CLEAN.include '*.log'
CLEAN.include '*.out'
CLEAN.include '*.rel'
CLEAN.include '*.toc'
CLEAN.include '*.bak'
CLEAN.include 'students_tasks.tex'
CLEAN.include 'data/5/scp_guide/*.log'

CLOBBER.include 'build'
CLOBBER.include '*.pdf'
CLOBBER.include '*.dvi'
CLOBBER.include 'data/5/scp_guide/*.chm'

directory "build"

#task :default => [:test]

task "scp_guide" => "build" do
  sh "hhc data/5/scp_guide/scp_guide.hhp" do |ok, status|
    if ok
      fail
    else
      ok
    end
  end
  cp "data/5/scp_guide/scp_guide.chm", "build"
end

task "tasks_list" do
  sh "ruby utils/gen_tasks_list.rb"
end

task "students_tasks" do
  sh "ruby utils/gen_students_tasks.rb 1"
  sh "pdflatex students_tasks.tex"
end